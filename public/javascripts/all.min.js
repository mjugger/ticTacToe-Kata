var ngMaterialEls=angular.module("material-elements",["ngMaterial"]);ngMaterialEls.factory("mElements",[function(){var r={};return r.isGameOver=!1,r.resetBtnVisibility=function(){return r.isGameOver?(console.log("yep! isGameOver"),"reset-btn-show"):void 0},r}]);var t3Kata=angular.module("t3Kata",["material-elements"]);t3Kata.service("theGameBoard",function(){var r={};return r.board=new Array(9),r.clearBoard=function(){r.board=new Array(9),console.log("board cleared!")},r}),t3Kata.controller("t3Board",["$scope","mElements","theGameBoard",function(r,n,a){function e(){var n=l(4,r.cpu);t(n[1],r.cpu),i()&&u()}function t(n,a){return console.log("cell: ",n," player: ",a),void 0===r.t3Board.board[n]?(r.t3Board.board[n]=a,!0):!1}function o(){for(var n=[],a=0,e=r.t3Board.board.length;e>a;a++)void 0===r.t3Board.board[a]&&n.push(a);return n}function i(){return d(r.cpu)?1:d(r.human)?2:0===o().length?3:!1}function u(){n.isGameOver=!0;i();console.log("gameOverState called")}function l(n,a){var e,t=o(),u=a===r.cpu?-100:100,s=-1;if(i()>0||0===n)u=c();else for(var d=0,f=t.length;f>d;d++)r.t3Board.board[t[d]]=a,a===r.cpu?(e=l(n-1,r.human)[0],e>u&&(u=e,s=t[d])):(e=l(n-1,r.cpu)[0],u>e&&(u=e,s=t[d])),r.t3Board.board[t[d]]=void 0;return[u,s]}function c(){var n=0;for(var a in r.winningMoves)n+=s(r.winningMoves[a]);return n}function s(n){var a=0;if(r.t3Board.board[n[0]]===r.cpu?a=1:r.t3Board.board[n[0]]===r.human&&(a=-1),r.t3Board.board[n[1]]===r.cpu)if(1===a)a=10;else{if(-1===a)return 0;a=1}else if(r.t3Board.board[n[1]]===r.human)if(-1===a)a=-10;else{if(1===a)return 0;a=-1}if(r.t3Board.board[n[2]]===r.cpu)if(a>0)a*=10;else{if(0>a)return 0;a=1}else if(r.t3Board.board[n[2]]===r.human)if(0>a)a*=10;else{if(a>1)return 0;a=-1}return a}function d(n){var a;for(var e in r.winningMoves){a=0;for(var t=0,o=r.winningMoves[e].length;o>t;t++)if(r.t3Board.board[r.winningMoves[e][t]]===n&&(a+=1),3===a)return!0}return!1}r.human="O",r.cpu="X",r.winningMoves={win1:[0,1,2],win2:[3,4,5],win3:[6,7,8],win4:[0,3,6],win5:[1,4,7],win6:[2,5,8],win7:[0,4,8],win8:[2,4,6]},r.t3Board=a,r.activeClass=function(r){return r===this.cpu?"cpu-active":r===this.human?"human-active":"btn-blank"},r.humanMove=function(r){var n=t(r,this.human);n&&e(),i()&&u()}}]),t3Kata.controller("btn",["$scope","mElements","theGameBoard",function(r,n,a){r.restartGame=n.resetBtnVisibility,r.playAgain=function(){n.isGameOver=!1,a.clearBoard()}}]);