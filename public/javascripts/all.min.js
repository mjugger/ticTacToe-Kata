var gameBoard=angular.module("gameBoardModule",["material-elements"]);gameBoard.service("gameState",["theGameBoard","mElements",function(e,a){var n={};return n.human="O",n.cpu="X",n.winningMoves={win1:[0,1,2],win2:[3,4,5],win3:[6,7,8],win4:[0,3,6],win5:[1,4,7],win6:[2,5,8],win7:[0,4,8],win8:[2,4,6]},n.updateCell=function(a,r){return void 0===e.board[a]&&0===n.finalGameState()?(e.board[a]=r,!0):!1},n.availableMoves=function(){for(var a=[],n=0,r=e.board.length;r>n;n++)void 0===e.board[n]&&a.push(n);return a},n.finalGameState=function(){return n.hasWon(n.cpu)?1:n.hasWon(n.human)?2:0===n.availableMoves().length?3:0},n.gameOverState=function(){a.isGameOver=!0},n.hasWon=function(a){var r;for(var t in n.winningMoves){r=0;for(var i=0,o=n.winningMoves[t].length;o>i;i++)if(e.board[n.winningMoves[t][i]]===a&&(r+=1),3===r)return!0}return!1},n}]),gameBoard.service("theGameBoard",function(){var e={};return e.board=new Array(9),e.clearBoard=function(){e.board=new Array(9)},e});var ngMaterialEls=angular.module("material-elements",["ngMaterial"]);ngMaterialEls.factory("mElements",[function(){var e={};return e.isGameOver=!1,e.resetBtnVisibility=function(){return e.isGameOver?"reset-btn-show":void 0},e}]);var t3Ai=angular.module("t3AiModule",["gameBoardModule"]);t3Ai.service("t3_ai",["gameState","theGameBoard",function(e,a){function n(t,i){var o,u=e.availableMoves(),l=i===e.cpu?-100:100,m=-1;if(e.finalGameState()>0||0===t)l=r();else for(var s=0,v=u.length;v>s;s++)a.board[u[s]]=i,i===e.cpu?(o=n(t-1,e.human).bestScore,o>l&&(l=o,m=u[s])):(o=n(t-1,e.cpu).bestScore,l>o&&(l=o,m=u[s])),a.board[u[s]]=void 0;return{bestMove:m,bestScore:l}}function r(){var a=0;for(var n in e.winningMoves)a+=t(e.winningMoves[n]);return a}function t(n){var r=0;if(a.board[n[0]]===e.cpu?r=1:a.board[n[0]]===e.human&&(r=-1),a.board[n[1]]===e.cpu)if(1===r)r=10;else{if(-1===r)return 0;r=1}else if(a.board[n[1]]===e.human)if(-1===r)r=-10;else{if(1===r)return 0;r=-1}if(a.board[n[2]]===e.cpu)if(r>0)r*=10;else{if(0>r)return 0;r=1}else if(a.board[n[2]]===e.human)if(0>r)r*=10;else{if(r>1)return 0;r=-1}return r}var i={};return i.callAI=function(){var a=n(4,e.cpu);return a},i}]);var t3Kata=angular.module("t3Kata",["material-elements","gameBoardModule","t3AiModule"]);t3Kata.controller("t3Board",["$scope","mElements","theGameBoard","gameState","t3_ai",function(e,a,n,r,t){function i(){var e=t.callAI();r.updateCell(e.bestMove,r.cpu),r.finalGameState()>0&&r.gameOverState()}e.t3Board=n,e.activeClass=function(e){return e===r.cpu?"cpu-active":e===r.human?"human-active":"btn-blank"},e.humanMove=function(e){var a=r.updateCell(e,r.human);a&&i(),r.finalGameState()>0&&r.gameOverState()}}]),t3Kata.controller("btn",["$scope","mElements","theGameBoard",function(e,a,n){e.restartGame=a.resetBtnVisibility,e.playAgain=function(){a.isGameOver=!1,n.clearBoard()}}]);