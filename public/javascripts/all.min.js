var gameBoard=angular.module("gameBoardModule",["material-elements"]);gameBoard.service("gameState",["theGameBoard","mElements",function(a,e){var t={};return t.human="O",t.cpu="X",t.winningMoves={win1:[0,1,2],win2:[3,4,5],win3:[6,7,8],win4:[0,3,6],win5:[1,4,7],win6:[2,5,8],win7:[0,4,8],win8:[2,4,6]},t.updateCell=function(e,r){return void 0===a.board[e]&&0===t.finalGameState()?(a.board[e]=r,!0):!1},t.availableMoves=function(){for(var e=[],t=0,r=a.board.length;r>t;t++)void 0===a.board[t]&&e.push(t);return e},t.finalGameState=function(){return t.hasWon(t.cpu)?1:t.hasWon(t.human)?2:0===t.availableMoves().length?3:0},t.gameOverState=function(){e.isGameOver=!0},t.hasWon=function(e){var r;for(var n in t.winningMoves){r=0;for(var o=0,i=t.winningMoves[n].length;i>o;o++)if(a.board[t.winningMoves[n][o]]===e&&(r+=1),3===r)return!0}return!1},t}]),gameBoard.service("theGameBoard",function(){var a={};return a.board=new Array(9),a.clearBoard=function(){a.board=new Array(9)},a});var ngMaterialEls=angular.module("material-elements",["ngMaterial"]);ngMaterialEls.factory("mElements",[function(){var a={};return a.isGameOver=!1,a.resetBtnVisibility=function(){return a.isGameOver?"reset-btn-show":void 0},a}]);var t3Ai=angular.module("t3AiModule",[]);t3Ai.service("t3_ai",["gameState",function(a){function e(a,r){var o,i=n.gameState.availableMoves(),u=r===n.gameState.cpu?-100:100,m=-1;if(n.gameState.finalGameState()>0||0===a)u=t();else for(var l=0,g=i.length;g>l;l++)n.gameBoard.board[i[l]]=r,r===n.gameState.cpu?(o=e(a-1,n.gameState.human).bestScore,o>u&&(u=o,m=i[l])):(o=e(a-1,n.gameState.cpu).bestScore,u>o&&(u=o,m=i[l])),n.gameBoard.board[i[l]]=void 0;return{bestMove:m,bestScore:u}}function t(){var a=0;for(var e in n.gameState.winningMoves)a+=r(n.gameState.winningMoves[e]);return a}function r(a){var e=0;if(n.gameBoard.board[a[0]]===n.gameState.cpu?e=1:n.gameBoard.board[a[0]]===n.gameState.human&&(e=-1),n.gameBoard.board[a[1]]===n.gameState.cpu)if(1===e)e=10;else{if(-1===e)return 0;e=1}else if(n.gameBoard.board[a[1]]===n.gameState.human)if(-1===e)e=-10;else{if(1===e)return 0;e=-1}if(n.gameBoard.board[a[2]]===n.gameState.cpu)if(e>0)e*=10;else{if(0>e)return 0;e=1}else if(n.gameBoard.board[a[2]]===n.gameState.human)if(0>e)e*=10;else{if(e>1)return 0;e=-1}return e}var n,o={};return o.callAI=function(a){n=a;var t=e(4,n.gameState.cpu);return t.cpu=n.gameState.cpu,t},o}]);var t3Kata=angular.module("t3Kata",["material-elements","gameBoardModule","t3AiModule"]);t3Kata.controller("t3Board",["$scope","mElements","theGameBoard","gameState","t3_ai",function(a,e,t,r,n){function o(){var e={gameState:r,gameBoard:a.t3Board},t=n.callAI(e);r.updateCell(t.bestMove,r.cpu),r.finalGameState()>0&&r.gameOverState()}a.t3Board=t,a.activeClass=function(a){return a===r.cpu?"cpu-active":a===r.human?"human-active":"btn-blank"},a.humanMove=function(a){var e=r.updateCell(a,r.human);e&&o(),r.finalGameState()>0&&r.gameOverState()}}]),t3Kata.controller("btn",["$scope","mElements","theGameBoard",function(a,e,t){a.restartGame=e.resetBtnVisibility,a.playAgain=function(){e.isGameOver=!1,t.clearBoard()}}]);